---
title: 如何提高工作效率
tags:
---

除了日常开发工作，还需要跟测，打包，发布等任务。常常觉得非常忙，越忙问题越多。很多小问题是忙中出错。

总结思考过去的一些错误，感觉有些地方其实是可以提高的。

产品催着要包，于是赶紧着急打了一个包，上传到腾讯云。突然弹出一个安全提示邮件，告诉你负责的应用中发现多少个安全漏洞，修复的截止日期是xxxx年xx月xx。RTX同事告知codecc检查连接失败好几天的，需要赶紧排查。又有同事反馈上传到腾讯云的apk包无法下载。

于是越忙越乱。原因在哪，如何做到高质量地忙呢。

反思发现自动化做得不够。下面分几个方面进行反思

+ 本地打包存在的问题
+ 手动上传的问题
+ 手动生成渠道包的问题
+ 集体的智慧

# 打包

## 本地打包的原因

## 本地打包存在的问题


+ 配置RDM体验包时，本地打包上传相当繁琐(不规范命名的话，难以区分版本号)，却可以无缝结合RDM构建。非常方便。

## 配置到RDM打包

### 问题一
首先遇到的问题就是提示我配置的用户名密码不对，导致构建时无法拉取代码，构建失败。反复配置几次用户名密码，又莫名其秒地好了。

### 问题二
```
Build file '/data/rdm/projects/28158/app/build.gradle' line: 1

* What went wrong:
A problem occurred evaluating project ':app'.
> java.lang.UnsupportedClassVersionError: com/android/build/gradle/AppPlugin : Unsupported major.minor version 52.0
```

找了几篇博客 [1][ref] [2][ref2] [3][ref3] 简单地过了一下，了解到大概原因是`2.3.0`版本的Android Gradle Plugin需要在Java 8以上的虚拟机上才能运行。

> You get this error because a Java 7 VM tries to load a class compiled for Java 8. Java 8 has the class file version 52.0 but a Java 7 VM can only load class files up to version 51.0. In your case the Java 7 VM is your gradle build and the class is com.android.build.gradle.AppPlugin

我的机器上装的的确是Java 8，无论是在Android Studio构建还是命令行中Gradle构建都能成功。而在RDM上有装了JDK 6, JDK7 JDK 8多个环境，可能默认的并非JDK 8，所以编译报错。

找了篇内部文章 [1][ref4] [2][ref5] 了解了下RDM构建时用到的环境变量，重新设置JAVA_HOME即可。

```
export JAVA_HOME=$JDK8
export PATH=$JDK8/bin:$PATH
```

### 问题三
```
* What went wrong:
A problem occurred evaluating project ':app'.
> Failed to apply plugin [id 'com.android.application']
   > Minimum supported Gradle version is 2.14.1. Current version is 2.12. If using the gradle wrapper, try editing the distributionUrl in /data/rdm/projects/28158/gradle/wrapper/gradle-wrapper.properties to gradle-2.14.1-all.zip

```

提示Gradle版本不对，至少要求是2.14.1，但目前是2.12。但实际上指定的Gradle版本已经是2.14.1。应该还是环境变量的问题，强制将Gradle切换到2.14.1后问题解决

```
export GRADLE_HOME=/data/rdm/apps/gradle/gradle-2.14.1
export PATH=$GRADLE_HOME/bin:$PATH
```

[RDM新手指引][ref6]

## 收益



# 上传

[ref]: http://blog.csdn.net/yuxiaohui78/article/details/51465207
[ref2]: http://blog.csdn.net/ouyang_peng/article/details/51799001
[ref3]: http://www.jianshu.com/p/5eebd3c609d6
[ref4]: http://km.oa.com/group/18155/articles/show/261590?kmref=knowledge
[ref5]: http://km.oa.com/group/18155/articles/show/283141
[ref6]: http://km.oa.com/group/17345/articles/show/243042?kmref=search&from_page=1&no=5